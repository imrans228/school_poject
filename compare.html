{% extends "base.html" %}
{% block title %}Сравнение вузов{% endblock %}

{% block content %}
<div class="max-w-7xl mx-auto px-4 py-8">
    <h1 class="text-3xl font-black text-slate-900 mb-8 flex items-center gap-3">
        <i data-lucide="scale" class="text-blue-600"></i> Сравнение университетов
    </h1>

    {% if not unis %}
    <div class="bg-yellow-50 border-l-4 border-yellow-400 p-8 rounded-r-xl text-center">
        <h3 class="text-xl font-bold text-yellow-800 mb-2">Список пуст</h3>
        <p class="text-yellow-700 mb-6">Вы не выбрали вузы для сравнения.</p>
        <a href="{{ url_for('catalog') }}" class="inline-block bg-yellow-600 text-white px-8 py-3 rounded-xl font-bold hover:bg-yellow-700 transition">
            Перейти в каталог
        </a>
    </div>
    {% else %}
    
    <div class="overflow-x-auto rounded-2xl shadow-xl border border-slate-100 bg-white">
        <table class="w-full min-w-[800px] text-left border-collapse">
            <thead>
                <tr class="bg-slate-50 border-b border-slate-200">
                    <th class="p-6 text-sm font-bold text-slate-500 uppercase w-1/4">Параметры</th>
                    {% for uni in unis %}
                    <th class="p-6 min-w-[250px]">
                        <div class="text-xl font-black text-slate-800">{{ uni.name }}</div>
                        <div class="text-sm text-blue-600 font-medium">{{ uni.city }}</div>
                    </th>
                    {% endfor %}
                </tr>
            </thead>
            <tbody class="divide-y divide-slate-100">
                <tr class="hover:bg-slate-50/50">
                    <td class="p-6 font-bold text-slate-700">Стоимость обучения</td>
                    {% for uni in unis %}
                    <td class="p-6 text-slate-600">{{ uni.tuition }} ₸</td>
                    {% endfor %}
                </tr>
                <tr class="hover:bg-slate-50/50">
                    <td class="p-6 font-bold text-slate-700">Проходной балл</td>
                    {% for uni in unis %}
                    <td class="p-6"><span class="bg-green-100 text-green-800 px-2 py-1 rounded font-bold">{{ uni.min_unt_score }}</span></td>
                    {% endfor %}
                </tr>
                <tr class="hover:bg-slate-50/50">
                    <td class="p-6 font-bold text-slate-700">Рейтинг</td>
                    {% for uni in unis %}
                    <td class="p-6 text-yellow-500 font-bold">⭐ {{ uni.rating }}</td>
                    {% endfor %}
                </tr>
                <tr class="bg-slate-50/30">
                    <td class="p-6"></td>
                    {% for uni in unis %}
                    <td class="p-6">
                        <button onclick="removeFromCompare('{{ uni.id }}')" class="text-red-500 font-bold text-sm flex items-center gap-1 hover:underline">
                            <i data-lucide="trash-2" class="w-4 h-4"></i> Убрать
                        </button>
                    </td>
                    {% endfor %}
                </tr>
            </tbody>
        </table>
    </div>

    <div class="mt-8 text-center">
        <button onclick="clearCompare()" class="text-slate-500 hover:text-red-500 font-medium underline">
            Очистить весь список
        </button>
    </div>

    <script>
        // Скрипт для кнопок удаления
        function removeFromCompare(id) {
            let ids = localStorage.getItem('compare_unis') ? localStorage.getItem('compare_unis').split(',') : [];
            ids = ids.filter(i => i !== id && i !== "");
            localStorage.setItem('compare_unis', ids.join(','));
            window.location.reload(); // Перезагрузить страницу
        }

        function clearCompare() {
            localStorage.removeItem('compare_unis');
            window.location.href = "{{ url_for('catalog') }}";
        }
    </script>
    {% endif %}
</div>
{% endblock %}
